# Сокращатель ссылок

Запуск через docker-compose up. 

База данных, SQLite, находится прямо в контейнете. 
В продакшне, если бы сохранили SQLite, можно было бы поместить на отдельный volume.
Если бы использовали другую СУБД, с обращением по TCP-порту, то вынести в другой контейнер. 
Документация Swagger делается автоматически, доступ по /docs. 

Обращение:
1. `POST /api/v1/shorten`, содержимое {"url": <url>}
Пример ответа:
```
{
  "short_key": "ABC123",
  "url": "https://example.com",
  "use_counter": 0,
  "created_at": "2025-08-14T16:00:00"
}
```
Ошибки:

400 — неверный URL (Invalid URL)

2.
`GET /api/v1/s/{short_key}` — Редирект по короткой ссылке
Перенаправляет на оригинальный URL и увеличивает счётчик use_counter.

Параметры:
short_key (string) — короткий ключ ссылки

Ответы:
- 307 Temporary Redirect — редирект на оригинальный URL
- 404 — ключ не найден (Link not found) 

3. `GET /api/v1/stats/{key}` — Получить статистику ссылки
Возвращает информацию о короткой ссылке: оригинальный URL, количество переходов и дату создания.
Параметры:
key (string) — короткий ключ ссылки
Ответ 200:
```
{
  "original_url": "https://example.com",
  "clicks": 5,
  "created_at": "2025-08-14T16:00:00"
}
```
Ошибки:
404 — ключ не найден (Link not found)

Имеются юнит-тесты, но они заточены под локальный запуск. 
В продакшне тоже можно было бы поместить в контейнер либо через CI/CD. 
